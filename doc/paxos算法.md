# Paxos 
> Paxos算法是莱斯利·兰伯特（Leslie Lamport，就是 LaTeX 中的"La"，此人现在在微软研究院）于1990年提出的一种基于消息传递的一致性算法。这个算法被认为是类似算法中最有效的。
> 
>- 百度百科: https://baike.baidu.com/item/Paxos%20%E7%AE%97%E6%B3%95/10688635?fr=aladdin
>
- 分布式系统中如何对一个决议达成一致
## 一致性算法保证
1. 没有提案提出则没有提案被选择
1. 每个提议者在提出提案时都会为改提案指定一个具有全局唯一性的、递增的提案编号
1. 每个表决者在通过某提案后都会将提案编号记录在本地,每个表决者只会表决比记录在案的提案编号大的提案
1. 众多提案最终只有一个提案能被选中
1. 一旦提案选中,其他服务都竹筒同步改提案到本地


## 三种角色
- Proposer 提议者, 提出提案的.
- Acceptor 表决者, 是否accept天,半数以上的Acceptor接受某提案,认为通过.
- Learners 学习者, 提案通过后同步执行提案.

## 过程
1. 准备阶段 prepare
1. 接受阶段 accept

### 准备阶段 
1. 提议者准备一个提案编号为N的提案,向所有表决者发送N提案,用于试探集群是否支持该编号的提案
1. 表决者存储有maxN 当发送过来的编号小于 maxN 说明提案过时, 当前表决者采取不回应, 或者回应error来拒绝提案
    N 大于 maxN 说明该提案可以通过表决者将 proposal(mid,maxN,value)返回给提议者,
        参数说明
          1. mid, 表决者的id
          1. maxN 最大提案编号
          1. value 数据
    表决者未accept提案 发送 (mid,null,null)
### 接受阶段
1. 当提议者发送提案后,若收到半数以上的表决者的反馈,会将最终的提案发送给所有表决者 (N,value)
    参数说明
        1. N 提案编号
        1. value 提案数据 
        
1. 表决者收到提议者发送的提案后再次比对通过的最大提案号,,最大prepare提案号, 发送过来的提案编号大于两者,当前表决者通过提案.反之采取不回应或者回应error
1. 若提议者没收到半数的表决者的 accept 反馈, 重新进入 prepare 
        